# ClariFi Project

ClariFi is a personal finance management application designed to help users, particularly newcomers to Canada, gain clarity and control over their finances.

## Overview

This repository contains the source code for the ClariFi application, including:

-   **`clarifi-mobile/`**: The React Native (Expo) frontend application.
-   **`clarifi-api/`**: The NestJS backend API.
-   **`Docs/`**: Project documentation, including PRDs and technical specifications.
-   **`.taskmaster/`**: Task management files generated by `taskmaster-ai`.

## Project Structure

-   **`/clarifi-api`**: Contains the NestJS backend application.
    -   `src/`: Main source code for the API.
    -   `Dockerfile`: For building the API's Docker image.
    -   `.env.example` (or `.env` locally): Environment variable configuration.
-   **`/clarifi-mobile`**: Contains the React Native (Expo) frontend application.
    -   `app/`: Expo Router app directory with screens and layouts.
    -   `components/`: Reusable UI components.
    -   `services/`: Client-side business logic.
    -   `assets/`: Static assets like images and fonts.
    -   `constants/`: Application-wide constants.
-   **`/Docs`**: Contains all project documentation (PRD, Technical Specifications, etc.).
-   **`/.taskmaster`**: Contains tasks and reports generated by `taskmaster-ai`.
-   **`/.husky`**: Git hooks configuration managed by Husky.
-   **`docker-compose.yml`**: Defines and orchestrates the Docker services (API, database).
-   **`package.json`**: Root project configuration for Husky and workspace-level scripts.

## Prerequisites

Before you begin, ensure you have the following installed:

-   [Node.js](https://nodejs.org/) (LTS version recommended, e.g., v18 or v20)
-   [npm](https://www.npmjs.com/) (usually comes with Node.js)
-   [Docker Desktop](https://www.docker.com/products/docker-desktop/)
-   [Expo CLI](https://docs.expo.dev/get-started/installation/):
    ```bash
    npm install -g expo-cli
    ```
-   [NestJS CLI](https://docs.nestjs.com/cli/overview):
    ```bash
    npm install -g @nestjs/cli
    ```

## Getting Started

### 1. Clone the Repository

```bash
git clone <your-repository-url>
cd ClariFi
```

### 2. Install Root Dependencies

This installs Husky for Git hooks.

```bash
npm install
```

### 3. Backend Setup (`clarifi-api`)

Navigate to the backend directory:

```bash
cd clarifi-api
```

Install backend dependencies:

```bash
npm install
```

Create a `.env` file by copying `.env.example` (if it exists, otherwise create it manually based on the `docker-compose.yml` and `app.module.ts` configurations). You will need to manually create this file with at least `PORT` and `MONGODB_URI` variables.

Example `clarifi-api/.env` for Docker setup:

```env
PORT=3000
MONGODB_URI=mongodb://mongo:27017/clarifi
```

### 4. Frontend Setup (`clarifi-mobile`)

Navigate to the frontend directory:

```bash
cd ../clarifi-mobile 
# or from root: cd clarifi-mobile
```

Install frontend dependencies:

```bash
npm install
```

## Running the Application

### 1. Start Backend Services (API & Database)

From the project root directory (`/Users/aero/Dev/ClariFi/`):

```bash
docker-compose up --build
```

This will start the NestJS API (available at `http://localhost:3000`) and the MongoDB database.

### 2. Start Frontend Application

In a new terminal, navigate to the frontend directory (`/Users/aero/Dev/ClariFi/clarifi-mobile/`):

```bash
npm start
# or
expo start
```

This will open the Expo development server. You can then run the app on a simulator/emulator or on your physical device using the Expo Go app.

The frontend will attempt to connect to the backend at `http://localhost:3000`. Check the console logs in your browser (for web) or debugger for the "API Connection Test" message from `WelcomeScreen`.

## Code Quality: Linting and Formatting

Both frontend and backend projects are configured with ESLint and Prettier.

### Backend (`clarifi-api`)

NestJS comes with linting and formatting scripts:

```bash
cd clarifi-api
npm run lint
npm run format
```

### Frontend (`clarifi-mobile`)

Scripts are available in `clarifi-mobile/package.json`:

```bash
cd clarifi-mobile
npm run lint
npm run format
```

### Git Hooks

Husky is configured in the root project to run `lint-staged` on pre-commit. This will automatically lint and format staged files in both `clarifi-api` and `clarifi-mobile` before committing.

## Task Management

This project uses `taskmaster-ai` for task management. Tasks are stored in `.taskmaster/tasks/tasks.json`.
Refer to the [Task Master Development Workflow](Docs/Internal/dev_workflow.mdc) (Note: Create this file if it doesn't exist and link to your actual workflow guide).

## Contributing

(Contribution guidelines will be added here. This typically includes:
-   Branching strategy (e.g., feature branches, gitflow)
-   Commit message conventions (e.g., Conventional Commits)
-   Pull Request process
-   Code review guidelines
-   Testing requirements
) 